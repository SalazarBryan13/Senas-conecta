/* ============================================
   VARIABLES Y RESET
   ============================================ */
:root {
    /* Colores principales - Vibrantes y atractivos manteniendo accesibilidad */
    --color-primary: #6366F1;
    /* Índigo vibrante */
    --color-primary-light: #818CF8;
    --color-primary-dark: #4F46E5;
    --color-secondary: #EC4899;
    /* Rosa vibrante */
    --color-accent: #F59E0B;
    /* Ámbar dorado */
    --color-success: #10B981;
    /* Verde esmeralda */
    --color-warning: #F59E0B;
    --color-error: #EF4444;
    /* Rojo coral */
    --color-info: #3B82F6;
    /* Azul cielo */

    /* Colores de fondo - Gradientes y tonos suaves */
    --bg-primary: #F0F4FF;
    --bg-secondary: #E8EDFF;
    --bg-tertiary: #DDE7FF;
    --bg-gradient: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
    --bg-gradient-warm: linear-gradient(135deg, #F093FB 0%, #F5576C 100%);
    --bg-gradient-cool: linear-gradient(135deg, #4FACFE 0%, #00F2FE 100%);
    /* Fondo sólido oscuro (recomendado) para reducir fatiga visual y mejorar consistencia */
    --bg-gradient-soft: #0B1220;
    --bg-card: linear-gradient(135deg, #FFFFFF 0%, #F8FAFF 100%);
    --bg-card-hover: linear-gradient(135deg, #F8FAFF 0%, #F0F4FF 100%);
    --bg-dark: #1E293B;

    /* Colores de texto - Contraste mínimo 4.5:1 (WCAG AA) */
    --text-primary: #0F172A;
    --text-secondary: #475569;
    --text-light: #94A3B8;
    --text-on-dark: #FFFFFF;

    /* Espaciado */
    --spacing-xs: 0.5rem;
    --spacing-sm: 1rem;
    --spacing-md: 1.5rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;

    /* Tipografía */
    --font-size-base: 16px;
    --font-size-sm: 14px;
    --font-size-lg: 18px;
    --font-size-xl: 24px;
    --font-size-xxl: 32px;

    /* Bordes y sombras */
    --border-radius: 8px;
    --border-radius-lg: 12px;
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);

    /* Transiciones */
    --transition-fast: 0.2s ease;
    --transition-normal: 0.3s ease;
    --transition-slow: 0.5s ease;

    /* Z-index layers */
    --z-tooltip: 1000;
    --z-modal: 900;
    --z-header: 100;
}

/* Modo alto contraste */
[data-contrast="high"] {
    --color-primary: #000000;
    --color-primary-light: #333333;
    --bg-primary: #FFFFFF;
    --bg-secondary: #FFFFFF;
    --text-primary: #000000;
    --text-secondary: #000000;
    --border-color: #000000;
}

/* Reset y base */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: var(--font-size-base);
    scroll-behavior: smooth;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.6;
    color: var(--text-primary);
    background: var(--bg-gradient-soft);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Clase para lectores de pantalla */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

/* ============================================
   NAVEGACIÓN POR TECLADO
   ============================================ */

/* Estilos de enfoque mejorados para navegación por teclado */
*:focus {
    outline: none;
}

*:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 3px;
    border-radius: 4px;
    box-shadow: 0 0 0 6px rgba(245, 158, 11, 0.25);
    transition: outline-offset 0.1s ease, box-shadow 0.1s ease;
}

/* Skip link para saltar al contenido principal */
.skip-link {
    position: absolute;
    top: -100px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10000;
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
    color: white;
    padding: var(--spacing-md) var(--spacing-lg);
    border-radius: var(--border-radius-lg);
    text-decoration: none;
    font-weight: 700;
    font-size: var(--font-size-lg);
    box-shadow: 0 8px 30px rgba(99, 102, 241, 0.5);
    transition: top 0.3s ease;
}

.skip-link:focus {
    top: 20px;
    outline: 3px solid var(--color-accent);
    outline-offset: 3px;
}

/* Indicador visual de elemento enfocado */
.keyboard-focus-indicator {
    position: fixed;
    pointer-events: none;
    z-index: 9999;
    border: 3px dashed var(--color-accent);
    border-radius: var(--border-radius);
    transition: all 0.15s ease;
    box-shadow: 0 0 20px rgba(245, 158, 11, 0.4);
}

/* Navegación con flechas en grupos de opciones */
[role="radiogroup"] button:focus-visible,
[role="group"] button:focus-visible,
.answer-options button:focus-visible,
.decision-options button:focus-visible {
    outline: 4px solid var(--color-accent);
    outline-offset: 2px;
    transform: scale(1.02);
    z-index: 10;
}

/* Indicador de ayuda para teclado - Barra vertical izquierda */
.keyboard-hint {
    display: none;
    position: fixed;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(15, 23, 42, 0.95);
    color: white;
    padding: var(--spacing-md) var(--spacing-sm);
    border-radius: 0 var(--border-radius-lg) var(--border-radius-lg) 0;
    font-size: var(--font-size-sm);
    z-index: 9998;
    box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
    animation: slideInLeft 0.3s ease;
}

.keyboard-hint.visible {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    align-items: center;
}

.keyboard-hint>span {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--spacing-xs) 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    width: 100%;
}

.keyboard-hint>span:last-child {
    border-bottom: none;
}

.keyboard-hint>span:first-child {
    font-weight: 700;
    font-size: var(--font-size-base);
    padding-bottom: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
    border-bottom: 2px solid rgba(255, 255, 255, 0.4);
}

.keyboard-hint kbd {
    background: rgba(255, 255, 255, 0.25);
    padding: 6px 12px;
    border-radius: 8px;
    font-family: monospace;
    font-weight: 700;
    border: 2px solid rgba(255, 255, 255, 0.4);
    margin-bottom: 4px;
    font-size: var(--font-size-base);
    min-width: 70px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateY(-50%) translateX(-100%);
    }

    to {
        opacity: 1;
        transform: translateY(-50%) translateX(0);
    }
}

/* ============================================
   LAYOUT Y CONTENEDORES
   ============================================ */
.container {
    max-width: 600px;
    margin: 0 auto;
    padding: var(--spacing-xl);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(240, 244, 255, 0.95) 100%);
    border-radius: 24px;
    backdrop-filter: blur(20px);
    box-shadow: 0 20px 60px rgba(99, 102, 241, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.5);
    border: 2px solid rgba(99, 102, 241, 0.1);
    position: relative;
    overflow: hidden;
}

.container::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
    animation: containerGlow 8s ease-in-out infinite;
    pointer-events: none;
}

@keyframes containerGlow {

    0%,
    100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.5;
    }

    50% {
        transform: translate(-10%, -10%) scale(1.1);
        opacity: 0.8;
    }
}

.screen {
    display: none;
    min-height: 100vh;
    width: 100%;
    animation: fadeIn var(--transition-normal);
    background: var(--bg-gradient-soft);
}

.screen.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ============================================
   TIPOGRAFÍA
   ============================================ */
h1,
h2,
h3,
h4,
h5,
h6 {
    font-weight: 700;
    line-height: 1.2;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

.main-title {
    font-size: clamp(2rem, 5vw, 3.5rem);
    text-align: center;
    margin-bottom: var(--spacing-sm);
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #EC4899 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 900;
    letter-spacing: -0.02em;
    position: relative;
    z-index: 1;
    animation: titleGlow 3s ease-in-out infinite;
    filter: drop-shadow(0 4px 20px rgba(99, 102, 241, 0.4));
}

@keyframes titleGlow {

    0%,
    100% {
        filter: drop-shadow(0 0 5px rgba(99, 102, 241, 0.3));
    }

    50% {
        filter: drop-shadow(0 0 15px rgba(99, 102, 241, 0.6));
    }
}

.screen-title {
    font-size: var(--font-size-xl);
    text-align: center;
    margin-bottom: var(--spacing-sm);
    color: var(--color-primary);
}

.screen-subtitle {
    text-align: center;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-lg);
    font-size: var(--font-size-base);
}

.chapter-title {
    font-size: var(--font-size-lg);
    text-align: center;
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
}

.tagline {
    text-align: center;
    color: #000000;
    margin-bottom: var(--spacing-xl);
    font-size: var(--font-size-lg);
    font-weight: 600;
    text-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
    position: relative;
    z-index: 1;
}

.tagline::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
    border-radius: 2px;
}

/* ============================================
   LOGO
   ============================================ */
.logo-container {
    margin-bottom: var(--spacing-lg);
    text-align: center;
}

.logo-square {
    width: 140px;
    height: 140px;
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 30%, #EC4899 60%, #F59E0B 100%);
    border-radius: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4),
        0 0 0 4px rgba(255, 255, 255, 0.3),
        inset 0 2px 10px rgba(255, 255, 255, 0.3);
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
    z-index: 1;
}

.logo-square::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    animation: logoShine 3s ease-in-out infinite;
}

@keyframes logoShine {

    0%,
    100% {
        transform: translate(-50%, -50%) rotate(0deg);
    }

    50% {
        transform: translate(-50%, -50%) rotate(180deg);
    }
}

.logo-square:hover {
    transform: scale(1.15) rotate(8deg);
    box-shadow: 0 20px 50px rgba(99, 102, 241, 0.6),
        0 0 0 6px rgba(255, 255, 255, 0.4),
        inset 0 2px 15px rgba(255, 255, 255, 0.4);
}

.logo-text {
    font-size: 3.5rem;
    font-weight: 900;
    color: var(--text-on-dark);
    text-shadow: 0 4px 15px rgba(0, 0, 0, 0.3),
        0 2px 5px rgba(255, 255, 255, 0.3);
    position: relative;
    z-index: 1;
    letter-spacing: -0.05em;
}

/* ============================================
   BOTONES
   ============================================ */
.btn {
    display: block;
    width: 100%;
    max-width: 450px;
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: var(--font-size-lg);
    font-weight: 600;
    text-align: center;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all var(--transition-normal);
    margin-bottom: 0;
    min-height: 56px;
    /* Tamaño mínimo táctil WCAG */
    position: relative;
    outline: none;
    letter-spacing: 0.3px;
}

.btn:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
}

.btn-primary {
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #EC4899 100%);
    color: var(--text-on-dark);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4),
        0 4px 10px rgba(236, 72, 153, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    border: none;
    position: relative;
    overflow: hidden;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    font-size: 0.95rem;
}

.btn-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s;
}

.btn-primary:hover:not(:disabled)::before {
    left: 100%;
}

.btn-primary:hover:not(:disabled) {
    background: linear-gradient(135deg, #818CF8 0%, #A78BFA 50%, #F472B6 100%);
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 12px 35px rgba(99, 102, 241, 0.5),
        0 6px 15px rgba(236, 72, 153, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.btn-primary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-primary:disabled {
    background-color: var(--text-light);
    cursor: not-allowed;
    opacity: 0.6;
}

.btn-secondary {
    background: linear-gradient(135deg, #FFFFFF 0%, #F8FAFF 100%);
    color: #6366F1;
    border: 2px solid rgba(99, 102, 241, 0.3);
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
    font-weight: 600;
    position: relative;
    overflow: hidden;
    transition: all var(--transition-normal);
}

.btn-secondary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
    transition: left 0.5s;
}

.btn-secondary:hover:not(:disabled)::before {
    left: 100%;
}

.btn-secondary:hover:not(:disabled) {
    background: linear-gradient(135deg, #F0F4FF 0%, #E8EDFF 100%);
    border-color: #818CF8;
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.9);
    transform: translateY(-3px) scale(1.01);
    color: #4F46E5;
}

.button-group {
    width: 100%;
    max-width: 450px;
    margin-bottom: var(--spacing-xl);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    position: relative;
    z-index: 1;
}

/* ============================================
   ENLACES
   ============================================ */
.settings-link,
.back-link,
.text-link {
    color: #6366F1;
    text-decoration: none;
    font-size: var(--font-size-sm);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: var(--border-radius);
    cursor: pointer;
    padding: var(--spacing-sm) var(--spacing-md);
    margin-top: var(--spacing-md);
    transition: all var(--transition-fast);
    min-height: 44px;
    /* Tamaño mínimo táctil */
    display: inline-block;
    font-weight: 500;
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.1);
}

.settings-link:hover,
.back-link:hover,
.text-link:hover {
    color: #4F46E5;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%);
    border-color: rgba(99, 102, 241, 0.4);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
}

.settings-link:focus-visible,
.back-link:focus-visible,
.text-link:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 4px;
}

/* ============================================
   TARJETAS DE JUGADOR
   ============================================ */
.player-cards {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    width: 100%;
    max-width: 500px;
}

.player-card {
    background: linear-gradient(135deg, #FFFFFF 0%, #F0F4FF 100%);
    border: 3px solid rgba(99, 102, 241, 0.2);
    background-clip: padding-box;
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-lg);
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-normal);
    min-height: 180px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    outline: none;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
}

.player-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    opacity: 0;
    transition: opacity var(--transition-normal);
    z-index: 0;
}

.player-card:hover {
    border-color: var(--color-primary);
    transform: translateY(-6px) scale(1.02);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
}

.player-card:hover::before {
    opacity: 0.1;
}

.player-card:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
}

.player-card[aria-pressed="true"] {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: var(--text-on-dark);
    box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
}

.player-card[aria-pressed="true"]::before {
    opacity: 0.2;
}

.player-card>* {
    position: relative;
    z-index: 1;
}

.player-card h3 {
    margin-top: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
}

.player-card p {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.player-card[aria-pressed="true"] p {
    color: var(--text-on-dark);
}

.player-icon {
    width: 100px;
    height: 100px;
    color: var(--color-accent);
    margin-bottom: var(--spacing-sm);
    filter: drop-shadow(0 4px 8px rgba(245, 158, 11, 0.3));
    animation: iconFloat 3s ease-in-out infinite;
}

@keyframes iconFloat {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-10px);
    }
}

.player-card[aria-pressed="true"] .player-icon {
    color: #FFD700;
    filter: drop-shadow(0 4px 12px rgba(255, 215, 0, 0.5));
}

.sign-icon {
    width: 100%;
    height: 100%;
}

/* ============================================
   MODOS DE JUEGO
   ============================================ */
.game-modes {
    width: 100%;
    max-width: 400px;
    margin-bottom: var(--spacing-lg);
}

/* ============================================
   PROGRESO
   ============================================ */
.progress-bar-container,
.lesson-progress,
.chapter-progress {
    width: 100%;
    margin-bottom: var(--spacing-md);
}

.progress-bar {
    width: 100%;
    height: 12px;
    background-color: var(--bg-tertiary);
    border-radius: var(--border-radius);
    overflow: hidden;
    position: relative;
}

.progress-bar .filled {
    height: 100%;
    background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
    border-radius: var(--border-radius);
    transition: width var(--transition-slow);
    position: relative;
}

.progress-bar .filled::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }

    100% {
        transform: translateX(100%);
    }
}

.progress-text {
    font-size: var(--font-size-sm);
    color: #000000;
    margin-top: var(--spacing-xs);
    display: block;
}

.global-progress-indicator {
    margin-top: var(--spacing-md);
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
    border-radius: var(--border-radius-lg);
    text-align: center;
    border: 2px solid rgba(99, 102, 241, 0.2);
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.15);
    position: relative;
    z-index: 1;
}

.global-progress-indicator .progress-text {
    color: #000000;
    font-weight: 600;
    font-size: var(--font-size-base);
}

/* ============================================
   ILUSTRACIONES Y ESCENAS
   ============================================ */
.sign-illustration-area,
.scene-illustration-area {
    width: 100%;
    max-width: 500px;
    margin: var(--spacing-lg) auto;
    border: 3px solid rgba(99, 102, 241, 0.3);
    background: linear-gradient(135deg, #FFFFFF 0%, #F0F4FF 100%);
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-md);
    min-height: 350px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-shadow: 0 8px 30px rgba(99, 102, 241, 0.2);
    overflow: hidden;
}

.sign-illustration-area::before,
.scene-illustration-area::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
    animation: areaGlow 4s ease-in-out infinite;
}

@keyframes areaGlow {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.5;
    }

    50% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0.8;
    }
}

/* Contenedor de imagen de seña */
.sign-image-container {
    width: 100%;
    height: 100%;
    min-height: 300px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius);
    overflow: hidden;
    background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
}

.sign-image-container.loading {
    background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
}

.sign-image-container.loading::after {
    content: '';
    position: absolute;
    width: 50px;
    height: 50px;
    border: 4px solid var(--color-primary);
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.sign-image,
.sign-video {
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center;
    transition: opacity var(--transition-normal), transform var(--transition-normal);
    border-radius: var(--border-radius);
    background: transparent;
}

.sign-video {
    cursor: pointer;
}

.sign-video:hover {
    transform: scale(1.02);
}

.sign-image-container.loaded .sign-image,
.sign-image-container.loaded .sign-video {
    animation: imageFadeIn 0.5s ease-out;
}

.sign-image-container.has-video {
    position: relative;
}

.sign-image-container.has-video::after {
    content: '▶ Video';
    position: absolute;
    top: var(--spacing-xs);
    right: var(--spacing-xs);
    background: rgba(99, 102, 241, 0.9);
    color: white;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius);
    font-size: var(--font-size-sm);
    font-weight: 600;
    z-index: 10;
    pointer-events: none;
}

@keyframes imageFadeIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.sign-image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity var(--transition-normal);
    pointer-events: none;
}

.sign-image-container:hover .sign-image-overlay {
    opacity: 1;
    background: rgba(0, 0, 0, 0.1);
}

.play-indicator {
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {

    0%,
    100% {
        transform: scale(1);
        opacity: 0.8;
    }

    50% {
        transform: scale(1.1);
        opacity: 1;
    }
}

.play-icon {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

.sign-animation {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.hand-visual {
    width: 150px;
    height: 180px;
    position: relative;
    margin-bottom: var(--spacing-md);
    display: flex;
    align-items: center;
    justify-content: center;
}

.fingers {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: flex-end;
    justify-content: center;
}

.finger {
    position: absolute;
    background: linear-gradient(135deg, #FBBF24 0%, #F59E0B 50%, #D97706 100%);
    border-radius: 12px 12px 0 0;
    box-shadow: 0 4px 10px rgba(217, 119, 6, 0.3), inset 0 2px 5px rgba(255, 255, 255, 0.3);
    border: 2px solid rgba(255, 255, 255, 0.4);
    position: relative;
}

.finger::after {
    content: '';
    position: absolute;
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
    width: 8px;
    height: 8px;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    box-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
}

/* Palma de la mano */
.fingers::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 120px;
    height: 90px;
    background: linear-gradient(135deg, #FBBF24 0%, #F59E0B 50%, #D97706 100%);
    border-radius: 60px 60px 25px 25px;
    box-shadow: 0 6px 15px rgba(217, 119, 6, 0.4), inset 0 3px 8px rgba(255, 255, 255, 0.2);
    z-index: 0;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.finger-1 {
    width: 22px;
    height: 70px;
    left: 25px;
    bottom: 80px;
    transform-origin: bottom;
    animation: fingerMove1 1.5s ease-in-out infinite;
    z-index: 1;
}

.finger-2 {
    width: 22px;
    height: 80px;
    left: 50px;
    bottom: 80px;
    transform-origin: bottom;
    animation: fingerMove2 1.5s ease-in-out infinite;
    z-index: 1;
}

.finger-3 {
    width: 22px;
    height: 85px;
    left: 75px;
    bottom: 80px;
    transform-origin: bottom;
    animation: fingerMove3 1.5s ease-in-out infinite;
    z-index: 1;
}

.finger-4 {
    width: 22px;
    height: 75px;
    left: 100px;
    bottom: 80px;
    transform-origin: bottom;
    animation: fingerMove4 1.5s ease-in-out infinite;
    z-index: 1;
}

.finger-thumb {
    width: 28px;
    height: 60px;
    left: 5px;
    bottom: 70px;
    transform-origin: bottom left;
    animation: thumbMove 1.5s ease-in-out infinite;
    z-index: 1;
    border-radius: 15px 0 0 15px;
}

/* Animaciones mejoradas para diferentes señas */
@keyframes fingerMove1 {

    0%,
    100% {
        transform: rotate(0deg) translateY(0);
    }

    25% {
        transform: rotate(-15deg) translateY(-5px);
    }

    50% {
        transform: rotate(-10deg) translateY(-3px);
    }

    75% {
        transform: rotate(-5deg) translateY(-2px);
    }
}

@keyframes fingerMove2 {

    0%,
    100% {
        transform: rotate(0deg) translateY(0);
    }

    25% {
        transform: rotate(-10deg) translateY(-4px);
    }

    50% {
        transform: rotate(-5deg) translateY(-2px);
    }

    75% {
        transform: rotate(-2deg) translateY(-1px);
    }
}

@keyframes fingerMove3 {

    0%,
    100% {
        transform: rotate(0deg) translateY(0);
    }

    25% {
        transform: rotate(5deg) translateY(-3px);
    }

    50% {
        transform: rotate(8deg) translateY(-4px);
    }

    75% {
        transform: rotate(3deg) translateY(-2px);
    }
}

@keyframes fingerMove4 {

    0%,
    100% {
        transform: rotate(0deg) translateY(0);
    }

    25% {
        transform: rotate(12deg) translateY(-5px);
    }

    50% {
        transform: rotate(15deg) translateY(-6px);
    }

    75% {
        transform: rotate(8deg) translateY(-3px);
    }
}

@keyframes thumbMove {

    0%,
    100% {
        transform: rotate(0deg) translateX(0);
    }

    25% {
        transform: rotate(20deg) translateX(5px);
    }

    50% {
        transform: rotate(25deg) translateX(8px);
    }

    75% {
        transform: rotate(15deg) translateX(3px);
    }
}

/* Animación de "Hola" - movimiento de lado a lado */
.sign-animation[data-sign="hola"] .hand-visual {
    animation: waveHand 2s ease-in-out infinite;
}

@keyframes waveHand {

    0%,
    100% {
        transform: rotate(0deg) translateX(0);
    }

    25% {
        transform: rotate(-20deg) translateX(-15px);
    }

    50% {
        transform: rotate(0deg) translateX(0);
    }

    75% {
        transform: rotate(20deg) translateX(15px);
    }
}

/* Animación de "Gracias" - movimiento hacia adelante */
.sign-animation[data-sign="gracias"] .hand-visual {
    animation: forwardMotion 2s ease-in-out infinite;
}

@keyframes forwardMotion {

    0%,
    100% {
        transform: translateY(0) translateX(0);
    }

    50% {
        transform: translateY(-20px) translateX(10px);
    }
}

/* Animación de "Adiós" - movimiento suave de lado a lado */
.sign-animation[data-sign="adios"] .hand-visual {
    animation: gentleWave 2.5s ease-in-out infinite;
}

@keyframes gentleWave {

    0%,
    100% {
        transform: rotate(0deg) translateX(0);
    }

    50% {
        transform: rotate(15deg) translateX(10px);
    }
}

/* Pausar animaciones si el usuario prefiere movimiento reducido */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

.illustration-placeholder {
    color: var(--text-light);
    font-style: italic;
    font-size: var(--font-size-sm);
    margin-top: var(--spacing-sm);
}

/* Escenas visuales mejoradas */
.scene-visual {
    width: 100%;
    height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.25);
    background: linear-gradient(135deg, #E0E7FF 0%, #F3E8FF 50%, #FCE7F3 100%);
}

.scene-visual.has-image,
.scene-visual.has-video {
    background: transparent;
    height: auto;
    min-height: 300px;
}

.story-scene-image,
.story-scene-video {
    width: 100%;
    height: auto;
    max-height: 400px;
    object-fit: cover;
    object-position: center;
    border-radius: var(--border-radius-lg);
    display: block;
}

.story-scene-video {
    cursor: pointer;
    transition: transform var(--transition-normal);
}

.story-scene-video:hover {
    transform: scale(1.02);
}

.scene-visual.has-video::after {
    content: '▶ Video';
    position: absolute;
    top: var(--spacing-xs);
    right: var(--spacing-xs);
    background: rgba(99, 102, 241, 0.9);
    color: white;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius);
    font-size: var(--font-size-sm);
    font-weight: 600;
    z-index: 10;
    pointer-events: none;
}

.school-scene {
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #EC4899 100%);
}

.school-scene.has-image,
.school-scene.has-video {
    background: transparent;
}

.park-scene {
    background: linear-gradient(135deg, #818CF8 0%, #A78BFA 50%, #F472B6 100%);
}

.park-scene.has-image,
.park-scene.has-video {
    background: transparent;
}

.work-scene {
    background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 50%, #DB2777 100%);
}

.work-scene.has-image,
.work-scene.has-video {
    background: transparent;
}

.scene-visual::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 40%;
    background: linear-gradient(to bottom, rgba(99, 102, 241, 0.2) 0%, rgba(139, 92, 246, 0.3) 100%);
    z-index: 0;
}

.school-building {
    width: 200px;
    height: 200px;
    position: relative;
    z-index: 1;
    animation: buildingAppear 1s ease-out, buildingPulse 4s ease-in-out infinite;
    filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
}

@keyframes buildingPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.02);
    }
}

@keyframes buildingAppear {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.school-building .roof {
    width: 0;
    height: 0;
    border-left: 90px solid transparent;
    border-right: 90px solid transparent;
    border-bottom: 70px solid #E74C3C;
    margin-bottom: -5px;
    position: relative;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.2));
}

.school-building .roof::after {
    content: '';
    position: absolute;
    top: -70px;
    left: -60px;
    width: 0;
    height: 0;
    border-left: 60px solid transparent;
    border-right: 60px solid transparent;
    border-bottom: 50px solid #C0392B;
    z-index: -1;
}

.school-building .windows {
    display: flex;
    gap: 25px;
    justify-content: center;
    padding: 15px;
    background-color: #ECF0F1;
    border: 4px solid #BDC3C7;
    border-top: none;
    position: relative;
}

.school-building .window {
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, #3498DB 0%, #2980B9 100%);
    border: 4px solid #1A252F;
    border-radius: 4px;
    position: relative;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
    animation: windowGlow 3s ease-in-out infinite;
}

.school-building .window::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 2px;
    background-color: #1A252F;
    transform: translateY(-50%);
}

.school-building .window::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #1A252F;
    transform: translateX(-50%);
}

@keyframes windowGlow {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.8;
    }
}

.school-building .door {
    width: 60px;
    height: 70px;
    background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
    border: 4px solid #1A252F;
    border-radius: 4px 4px 0 0;
    margin: 0 auto;
    position: relative;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.school-building .door::before {
    content: '';
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    width: 8px;
    height: 8px;
    background-color: #F39C12;
    border-radius: 50%;
    box-shadow: 0 0 4px rgba(243, 156, 18, 0.5);
}

/* Nubes decorativas */
.scene-visual::after {
    content: '';
    position: absolute;
    top: 20px;
    left: 20px;
    width: 80px;
    height: 40px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50px;
    box-shadow:
        -30px 15px 0 -8px rgba(255, 255, 255, 0.7),
        30px 15px 0 -8px rgba(255, 255, 255, 0.7),
        -15px 25px 0 -5px rgba(255, 255, 255, 0.6);
    animation: cloudMove 25s linear infinite;
    filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1));
}

@keyframes cloudMove {
    0% {
        transform: translateX(-150px);
    }

    100% {
        transform: translateX(calc(100vw + 150px));
    }
}

/* Elementos adicionales para escena de parque */
.park-scene::before {
    content: '';
    position: absolute;
    bottom: 40%;
    left: 10%;
    width: 30px;
    height: 30px;
    background: radial-gradient(circle, #FEF3C7 0%, #FCD34D 100%);
    border-radius: 50%;
    box-shadow: 0 0 20px rgba(252, 211, 77, 0.6);
    animation: sunRotate 10s linear infinite;
    z-index: 0;
}

@keyframes sunRotate {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

.park-scene::after {
    content: '';
    position: absolute;
    bottom: 35%;
    right: 15%;
    width: 25px;
    height: 25px;
    background: radial-gradient(circle, #DBEAFE 0%, #93C5FD 100%);
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(147, 197, 253, 0.5);
    animation: float 4s ease-in-out infinite;
    z-index: 0;
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-15px);
    }
}

/* Elementos para escena de trabajo */
.work-scene::before {
    content: '';
    position: absolute;
    top: 15%;
    right: 10%;
    width: 40px;
    height: 60px;
    background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
    border-radius: 4px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    z-index: 0;
}

.work-scene::after {
    content: '';
    position: absolute;
    top: 20%;
    right: 15%;
    width: 30px;
    height: 30px;
    background: linear-gradient(135deg, #FEF3C7 0%, #FCD34D 100%);
    border-radius: 50%;
    box-shadow: 0 0 20px rgba(252, 211, 77, 0.6);
    animation: lightPulse 2s ease-in-out infinite;
    z-index: 1;
}

@keyframes lightPulse {

    0%,
    100% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.7;
        transform: scale(1.2);
    }
}

/* Elementos del parque */
.park-elements {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    gap: 40px;
}

.park-tree {
    position: relative;
    z-index: 1;
}

.park-bench {
    width: 80px;
    height: 40px;
    background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
    border-radius: 4px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    position: relative;
    z-index: 1;
}

.park-bench::before {
    content: '';
    position: absolute;
    top: -20px;
    left: 10px;
    width: 60px;
    height: 3px;
    background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
    border-radius: 2px;
}

.park-bench::after {
    content: '';
    position: absolute;
    top: -20px;
    right: 10px;
    width: 60px;
    height: 3px;
    background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
    border-radius: 2px;
}

/* Elementos de oficina */
.office-elements {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.office-building {
    width: 200px;
    height: 180px;
    background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    position: relative;
    padding: 20px;
    display: flex;
    gap: 15px;
    justify-content: center;
    align-items: center;
}

.office-window {
    width: 50px;
    height: 60px;
    background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
    border: 3px solid #1E293B;
    border-radius: 4px;
    position: relative;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
    animation: windowGlow 3s ease-in-out infinite;
}

.office-window::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 2px;
    background-color: #1E293B;
    transform: translateY(-50%);
}

.office-window::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #1E293B;
    transform: translateX(-50%);
}

/* ============================================
   OPCIONES DE RESPUESTA Y DECISIÓN
   ============================================ */
.answer-options {
    width: 100%;
    max-width: 500px;
    margin: var(--spacing-lg) auto;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.answer-option {
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(135deg, #FFFFFF 0%, #F8FAFF 100%);
    border: 2px solid rgba(99, 102, 241, 0.2);
    border-radius: var(--border-radius);
    font-size: var(--font-size-lg);
    text-align: left;
    cursor: pointer;
    transition: all var(--transition-fast);
    min-height: 56px;
    color: var(--text-primary) !important;
    display: flex;
    align-items: center;
    outline: none;
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.1);
}

.answer-option:hover:not(:disabled) {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, #F0F4FF 0%, #E8EDFF 100%);
    transform: translateX(5px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);
}

.answer-option:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
}

/* Opciones del modo historia */
.decision-options {
    width: 100%;
    max-width: 500px;
    margin: var(--spacing-lg) auto;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.decision-option {
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(135deg, #FFFFFF 0%, #F8FAFF 100%);
    border: 2px solid rgba(99, 102, 241, 0.2);
    border-radius: var(--border-radius);
    font-size: var(--font-size-lg);
    text-align: left;
    cursor: pointer;
    transition: all var(--transition-fast);
    min-height: 56px;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    outline: none;
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.1);
}

.decision-option:hover:not(:disabled) {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, #F0F4FF 0%, #E8EDFF 100%);
    transform: translateX(5px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);
}

.decision-option:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
}

.decision-option.selected {
    border-color: var(--color-success);
    background: linear-gradient(135deg, #34D399 0%, #10B981 100%);
    color: var(--text-on-dark);
    box-shadow: 0 6px 18px rgba(16, 185, 129, 0.35);
    transform: translateX(5px);
}

.decision-option:disabled {
    cursor: not-allowed;
    opacity: 0.85;
}

.decision-feedback {
    margin: var(--spacing-lg) auto;
    max-width: 500px;
    width: 100%;
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-lg);
    border-left: 4px solid var(--color-primary);
    border-right: 2px solid rgba(99, 102, 241, 0.1);
    background: linear-gradient(135deg, #FFFFFF 0%, #EFF6FF 100%);
    color: var(--text-secondary);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.15);
    font-size: var(--font-size-base);
    text-align: left;
    line-height: 1.5;
    animation: slideIn var(--transition-normal);
}

.decision-feedback.success {
    border-left-color: var(--color-success);
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(209, 250, 229, 0.6) 100%);
    color: #065F46;
}

.decision-feedback.error {
    border-left-color: var(--color-error);
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(254, 226, 226, 0.6) 100%);
    color: #7F1D1D;
}

.answer-option[aria-checked="true"]:not(.correct):not(.incorrect) {
    border-color: var(--color-success) !important;
    border-width: 3px !important;
    /* Mantener fondo y color originales */
    background: linear-gradient(135deg, #FFFFFF 0%, #F8FAFF 100%) !important;
    color: var(--text-primary) !important;
    /* Solo resaltar el borde con verde */
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
}


.answer-option.correct {
    border-color: var(--color-success) !important;
    border-width: 3px !important;
    background: linear-gradient(135deg, var(--color-success) 0%, #34D399 100%);
    color: #FFFFFF !important;
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
    animation: correctPulse 0.5s ease-out;
    font-weight: 600;
}

@keyframes correctPulse {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.05);
    }

    100% {
        transform: scale(1);
    }
}

.answer-option.incorrect {
    border-color: var(--color-error) !important;
    border-width: 3px !important;
    background: linear-gradient(135deg, var(--color-error) 0%, #F87171 100%);
    color: #FFFFFF !important;
    box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
    animation: shake 0.5s ease-out;
    font-weight: 600;
}

@keyframes shake {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-10px);
    }

    75% {
        transform: translateX(10px);
    }
}

.answer-option:disabled {
    cursor: not-allowed;
    opacity: 0.9;
}

.answer-option:disabled:not(.correct):not(.incorrect) {
    color: var(--text-primary) !important;
}

.answer-option:disabled.correct,
.answer-option:disabled.incorrect {
    opacity: 1;
    color: #FFFFFF !important;
}

.answer-option:disabled[aria-checked="true"]:not(.correct):not(.incorrect) {
    color: #FFFFFF !important;
    opacity: 1;
}

/* ============================================
   FEEDBACK Y MENSAJES
   ============================================ */
.feedback-message {
    padding: var(--spacing-md);
    border-radius: var(--border-radius-lg);
    margin: var(--spacing-md) 0;
    text-align: center;
    font-weight: 600;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.feedback-message.success {
    background: linear-gradient(135deg, #D4EDDA 0%, #C3E6CB 100%);
    color: #155724;
    border: 2px solid var(--color-success);
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
}

.feedback-message.error {
    background: linear-gradient(135deg, #F8D7DA 0%, #F5C6CB 100%);
    color: #721C24;
    border: 2px solid var(--color-error);
    box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
}

.feedback-message.info {
    background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
    color: #1E40AF;
    border: 2px solid #3B82F6;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.instruction-text {
    text-align: center;
    font-size: var(--font-size-lg);
    margin: 0;
    color: var(--text-primary);
    font-weight: 500;
}

.scenario-text {
    background: linear-gradient(135deg, #FFFFFF 0%, #F0F4FF 100%);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-lg);
    margin: var(--spacing-lg) auto;
    max-width: 500px;
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.2);
    border-left: 5px solid var(--color-primary);
    border-right: 2px solid rgba(99, 102, 241, 0.1);
    position: relative;
    overflow: hidden;
}

.scenario-text::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
    animation: textShine 3s ease-in-out infinite;
}

@keyframes textShine {

    0%,
    100% {
        opacity: 0.5;
    }

    50% {
        opacity: 1;
    }
}

.scenario-header {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    position: relative;
}

.scenario-text p {
    font-size: var(--font-size-lg);
    line-height: 1.8;
    color: var(--text-primary);
    position: relative;
    z-index: 1;
    flex: 1;
    margin: 0;
}

/* ============================================
   PANTALLA DE RESULTADO
   ============================================ */
.success-icon {
    width: 140px;
    height: 140px;
    margin: 0 auto var(--spacing-lg);
    color: var(--color-success);
    animation: scaleIn var(--transition-slow), successPulse 2s ease-in-out infinite;
    filter: drop-shadow(0 8px 20px rgba(16, 185, 129, 0.4));
}

@keyframes successPulse {

    0%,
    100% {
        transform: scale(1);
        filter: drop-shadow(0 8px 20px rgba(16, 185, 129, 0.4));
    }

    50% {
        transform: scale(1.1);
        filter: drop-shadow(0 12px 30px rgba(16, 185, 129, 0.6));
    }
}

@keyframes scaleIn {
    from {
        transform: scale(0);
        opacity: 0;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

.checkmark {
    width: 100%;
    height: 100%;
}

.result-title {
    font-size: var(--font-size-xxl);
    text-align: center;
    background: linear-gradient(135deg, var(--color-success) 0%, #34D399 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: var(--spacing-xs);
    font-weight: 800;
    text-shadow: 0 2px 10px rgba(16, 185, 129, 0.3);
}

.result-subtitle {
    text-align: center;
    font-size: var(--font-size-lg);
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xl);
}

.chapter-progress-section {
    width: 100%;
    max-width: 500px;
    margin: 0 auto var(--spacing-lg);
    padding: var(--spacing-lg);
    background: linear-gradient(135deg, #FFFFFF 0%, #F0F4FF 100%);
    border-radius: var(--border-radius-lg);
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
    border: 2px solid rgba(99, 102, 241, 0.2);
}

.chapter-progress-section h3 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.stats-container,
.global-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--spacing-md);
    margin: var(--spacing-lg) auto;
    max-width: 500px;
    width: 100%;
}

.stat-box {
    background: linear-gradient(135deg, #FFFFFF 0%, #F0F4FF 100%);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-lg);
    text-align: center;
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
    transition: all var(--transition-fast);
    border: 2px solid rgba(99, 102, 241, 0.2);
    position: relative;
    overflow: hidden;
}

.stat-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
    transform: scaleX(0);
    transition: transform var(--transition-normal);
}

.stat-box:hover {
    transform: translateY(-6px) scale(1.05);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.2);
    border-color: var(--color-primary);
}

.stat-box:hover::before {
    transform: scaleX(1);
}

.stat-number {
    font-size: var(--font-size-xxl);
    font-weight: 700;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: var(--spacing-xs);
    text-shadow: 0 2px 10px rgba(99, 102, 241, 0.3);
    animation: numberPulse 2s ease-in-out infinite;
}

@keyframes numberPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.05);
    }
}

.stat-label {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    font-weight: 500;
}

.action-buttons {
    width: 100%;
    max-width: 400px;
    margin: var(--spacing-lg) auto;
}

/* ============================================
   MAPA DE AVANCE
   ============================================ */
.chapters-path {
    width: 100%;
    max-width: 500px;
    margin: var(--spacing-xl) auto;
    position: relative;
}

.chapter-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    padding: var(--spacing-lg);
    background: linear-gradient(135deg, #FFFFFF 0%, #F0F4FF 100%);
    border-radius: var(--border-radius-lg);
    transition: all var(--transition-normal);
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
    position: relative;
    overflow: hidden;
    width: 100%;
    text-align: left;
    border: 2px solid rgba(99, 102, 241, 0.1);
    cursor: pointer;
}

.chapter-item.clickable {
    cursor: pointer;
}

.chapter-item.clickable:hover {
    transform: translateX(8px) scale(1.02);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
}

.chapter-item.clickable:active {
    transform: translateX(4px) scale(1.01);
}

.chapter-item.clickable:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
}

.chapter-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0;
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    transition: width var(--transition-normal);
    z-index: 0;
}


.chapter-item:hover::before {
    width: 6px;
}

.chapter-item>* {
    position: relative;
    z-index: 1;
}

.chapter-item.completed {
    border-left: 6px solid var(--color-success);
    background: linear-gradient(135deg, #ECFDF5 0%, #F0FDF4 50%, #FFFFFF 100%);
    border-color: rgba(16, 185, 129, 0.3);
}

.chapter-item.completed::before {
    background: linear-gradient(135deg, var(--color-success), #34D399);
    width: 6px;
}

.chapter-item.in-progress {
    border-left: 6px solid var(--color-accent);
    background: linear-gradient(135deg, #FFFBEB 0%, #FEF3C7 50%, #FFFFFF 100%);
    border-color: rgba(245, 158, 11, 0.3);
}

.chapter-item.in-progress::before {
    background: linear-gradient(135deg, var(--color-accent), #FCD34D);
    width: 6px;
}

.chapter-item.locked {
    opacity: 0.7;
    border-left: 6px solid var(--text-light);
    background: linear-gradient(135deg, #F1F5F9 0%, #FFFFFF 100%);
    filter: grayscale(0.3);
    cursor: not-allowed;
}

.chapter-item.locked:hover {
    transform: none;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.chapter-icon {
    width: 60px;
    height: 60px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.icon-school {
    width: 100%;
    height: 100%;
    position: relative;
}

.school-roof {
    width: 0;
    height: 0;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-bottom: 25px solid #E74C3C;
    margin: 0 auto;
}

.school-body {
    width: 40px;
    height: 30px;
    background-color: #3498DB;
    margin: -5px auto 0;
    border: 2px solid #1A252F;
}

.school-bell {
    width: 8px;
    height: 8px;
    background-color: #F39C12;
    border-radius: 50%;
    margin: -15px auto 0;
    position: relative;
    z-index: 1;
}

.icon-tree {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    animation: treeSway 3s ease-in-out infinite;
}

@keyframes treeSway {

    0%,
    100% {
        transform: rotate(0deg);
    }

    25% {
        transform: rotate(-2deg);
    }

    75% {
        transform: rotate(2deg);
    }
}

.tree-trunk {
    width: 16px;
    height: 30px;
    background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
    border-radius: 3px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    position: relative;
    z-index: 1;
}

.tree-leaves {
    width: 60px;
    height: 60px;
    background: radial-gradient(circle at 30% 30%, #2ECC71 0%, #27AE60 50%, #229954 100%);
    border-radius: 50% 50% 50% 0;
    margin-bottom: -15px;
    position: relative;
    box-shadow: 0 4px 10px rgba(39, 174, 96, 0.3);
    filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1));
}

.tree-leaves::before {
    content: '';
    position: absolute;
    width: 45px;
    height: 45px;
    background: radial-gradient(circle at 40% 40%, #58D68D 0%, #2ECC71 50%, #27AE60 100%);
    border-radius: 50% 50% 50% 0;
    top: 8px;
    left: 8px;
    box-shadow: inset 0 2px 5px rgba(255, 255, 255, 0.3);
}

.tree-leaves::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    background: #F39C12;
    border-radius: 50%;
    top: 15px;
    right: 10px;
    box-shadow: 0 2px 5px rgba(243, 156, 18, 0.4);
    animation: fruitGlow 2s ease-in-out infinite;
}

@keyframes fruitGlow {

    0%,
    100% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.8;
        transform: scale(1.1);
    }
}

.lock-icon {
    width: 100%;
    height: 100%;
    color: var(--text-light);
}

.chapter-info {
    flex: 1;
}

.chapter-info h3 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-xs);
}

.chapter-status {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
}

.path-connector {
    width: 2px;
    height: 30px;
    background-color: var(--bg-tertiary);
    margin: 0 auto var(--spacing-md);
    margin-left: calc(30px + var(--spacing-md));
}

/* ============================================
   CONFIGURACIÓN
   ============================================ */
.settings-section {
    background: linear-gradient(135deg, #FFFFFF 0%, #F0F4FF 100%);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-lg);
    margin-bottom: var(--spacing-lg);
    width: 100%;
    max-width: 500px;
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
    border: 2px solid rgba(99, 102, 241, 0.1);
}

.settings-section h3 {
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
}

.setting-item {
    margin-bottom: var(--spacing-md);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
}

.setting-item label {
    font-weight: 500;
    color: var(--text-primary);
    flex: 1;
}

.setting-item input[type="range"] {
    flex: 1;
    max-width: 200px;
    height: 8px;
    border-radius: 4px;
    background: var(--bg-tertiary);
    outline: none;
    -webkit-appearance: none;
    appearance: none;
}

.setting-item input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--color-primary);
    cursor: pointer;
}

.setting-item input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--color-primary);
    cursor: pointer;
    border: none;
}

.setting-item input[type="checkbox"] {
    width: 24px;
    height: 24px;
    cursor: pointer;
    accent-color: var(--color-primary);
}

.setting-item select {
    padding: var(--spacing-sm);
    border: 2px solid var(--bg-tertiary);
    border-radius: var(--border-radius);
    font-size: var(--font-size-base);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    cursor: pointer;
    flex: 1;
    max-width: 200px;
}

.setting-item select:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
}

#font-size-value {
    min-width: 50px;
    text-align: right;
    font-weight: 600;
    color: var(--color-primary);
}

/* ============================================
   AYUDA Y TOOLTIPS
   ============================================ */
/* Botón de ayuda inline (junto a la instrucción) */
.instruction-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    margin: var(--spacing-md) 0;
    position: relative;
}

.help-button-inline {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-info) 0%, var(--color-primary) 100%);
    color: var(--text-on-dark);
    border: 2px solid rgba(255, 255, 255, 0.3);
    font-size: var(--font-size-lg);
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    flex-shrink: 0;
    outline: none;
}

.help-button-inline::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    transform: translate(-50%, -50%);
    transition: width 0.4s, height 0.4s;
}

.help-button-inline:hover::before,
.help-button-inline:focus::before {
    width: 100%;
    height: 100%;
}

.help-button-inline:hover {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    transform: scale(1.1);
    box-shadow: 0 6px 18px rgba(99, 102, 241, 0.5);
}

.help-button-inline:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
}

.help-button-inline:active {
    transform: scale(0.95);
}

.help-button-inline span {
    position: relative;
    z-index: 1;
    line-height: 1;
}

/* Botón de ayuda flotante (para otras pantallas si es necesario) */
.help-button {
    position: fixed;
    bottom: var(--spacing-lg);
    right: var(--spacing-lg);
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    color: var(--text-on-dark);
    border: none;
    font-size: var(--font-size-xl);
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
    z-index: var(--z-tooltip);
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    animation: helpPulse 2s ease-in-out infinite;
    position: relative;
    overflow: hidden;
}

.help-button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.help-button:hover::before {
    width: 100%;
    height: 100%;
}

@keyframes helpPulse {

    0%,
    100% {
        transform: scale(1);
        box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
    }

    50% {
        transform: scale(1.05);
        box-shadow: 0 12px 35px rgba(99, 102, 241, 0.6);
    }
}

.help-button:hover {
    background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%);
    transform: scale(1.15);
    box-shadow: 0 15px 40px rgba(99, 102, 241, 0.6);
}

.help-button span {
    position: relative;
    z-index: 1;
}

.help-button:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
}

.tooltip {
    position: fixed;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
    color: var(--text-on-dark);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-lg);
    box-shadow: 0 15px 40px rgba(99, 102, 241, 0.5);
    max-width: 400px;
    z-index: var(--z-tooltip);
    animation: fadeIn var(--transition-normal);
    border: 3px solid rgba(255, 255, 255, 0.3);
    position: relative;
    overflow: visible;
}

.tooltip::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    animation: tooltipShine 3s ease-in-out infinite;
}

.tooltip::after {
    content: '';
    position: absolute;
    top: -10px;
    left: 20px;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid var(--color-primary-dark);
    filter: drop-shadow(0 -2px 4px rgba(0, 0, 0, 0.2));
}

.tooltip.tooltip-above::after {
    top: auto;
    bottom: -10px;
    border-bottom: none;
    border-top: 10px solid var(--color-primary-dark);
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

@keyframes tooltipShine {
    0% {
        left: -100%;
    }

    100% {
        left: 100%;
    }
}

.help-content {
    position: relative;
    z-index: 1;
}

.help-title {
    margin: 0 0 var(--spacing-sm) 0;
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--text-on-dark);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.help-text {
    margin: 0 0 var(--spacing-sm) 0;
    font-size: var(--font-size-base);
    line-height: 1.6;
    color: var(--text-on-dark);
}

.help-tip {
    margin: var(--spacing-sm) 0 0 0;
    padding: var(--spacing-sm);
    background: rgba(255, 255, 255, 0.15);
    border-radius: var(--border-radius);
    font-size: var(--font-size-sm);
    line-height: 1.5;
    color: var(--text-on-dark);
    border-left: 3px solid var(--color-accent);
}

.help-close-btn {
    position: absolute;
    top: var(--spacing-xs);
    right: var(--spacing-xs);
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    color: var(--text-on-dark);
    border: none;
    font-size: var(--font-size-xl);
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
    line-height: 1;
    padding: 0;
    outline: none;
}

.help-close-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.1);
}

.help-close-btn:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
}

.tooltip p {
    margin: 0;
    font-size: var(--font-size-sm);
    line-height: 1.5;
}

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 768px) {
    .container {
        padding: var(--spacing-md);
    }

    .main-title {
        font-size: var(--font-size-xl);
    }

    .screen-title {
        font-size: var(--font-size-lg);
    }

    .player-cards {
        gap: var(--spacing-sm);
    }

    .stats-container,
    .global-stats {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .container {
        padding: var(--spacing-sm);
    }

    .logo-square {
        width: 80px;
        height: 80px;
    }

    .btn {
        font-size: var(--font-size-base);
        padding: var(--spacing-sm) var(--spacing-md);
    }
}

/* ============================================
   ACCESIBILIDAD ADICIONAL
   ============================================ */
/* Enfoque visible mejorado */
*:focus-visible {
    outline: 3px solid var(--color-accent);
    outline-offset: 2px;
}

/* Mejora de contraste para texto pequeño */
small,
.small-text {
    font-size: var(--font-size-sm);
    color: var(--text-primary);
    line-height: 1.6;
}

/* Indicadores de estado */
[aria-busy="true"]::before {
    content: '';
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid var(--color-primary);
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
    margin-right: var(--spacing-xs);
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Mejora de legibilidad */
p,
li,
span {
    max-width: 65ch;
    /* Ancho óptimo para lectura */
}

/* ============================================
   PANTALLA DE GUÍA
   ============================================ */
.guide-content {
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
    text-align: left;
}

.guide-section {
    background: linear-gradient(135deg, #FFFFFF 0%, #F0F4FF 100%);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-lg);
    margin-bottom: var(--spacing-lg);
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
    border-left: 4px solid var(--color-primary);
    border-right: 2px solid rgba(99, 102, 241, 0.1);
}

.guide-section h3 {
    color: var(--color-primary);
    margin-bottom: var(--spacing-sm);
    font-size: var(--font-size-lg);
}

.guide-section p {
    color: var(--text-primary);
    line-height: 1.8;
    margin-bottom: var(--spacing-sm);
}

.guide-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.guide-list li {
    padding: var(--spacing-sm) 0;
    padding-left: var(--spacing-lg);
    position: relative;
    color: var(--text-primary);
    line-height: 1.6;
}

.guide-list li::before {
    content: '✓';
    position: absolute;
    left: 0;
    color: var(--color-success);
    font-weight: 700;
    font-size: var(--font-size-lg);
}

/* ============================================
   ANIMACIONES DE SEÑAS SVG
   ============================================ */

.sign-svg {
    filter: drop-shadow(0 4px 12px rgba(99, 102, 241, 0.2));
    max-width: 100%;
    height: auto;
}

@keyframes waveHand {

    0%,
    100% {
        transform: rotate(0deg) translateX(0);
    }

    25% {
        transform: rotate(-15deg) translateX(-5px);
    }

    50% {
        transform: rotate(0deg) translateX(0);
    }

    75% {
        transform: rotate(15deg) translateX(5px);
    }
}

@keyframes forwardMotion {

    0%,
    100% {
        transform: translateX(0) translateY(0);
    }

    50% {
        transform: translateX(10px) translateY(-5px);
    }
}

@keyframes gentleWave {

    0%,
    100% {
        transform: rotate(0deg) translateX(0);
    }

    25% {
        transform: rotate(-8deg) translateX(-3px);
    }

    50% {
        transform: rotate(0deg) translateX(0);
    }

    75% {
        transform: rotate(8deg) translateX(3px);
    }
}

@keyframes circularMotion {

    0%,
    100% {
        transform: rotate(0deg) translateX(0);
    }

    25% {
        transform: rotate(5deg) translateX(3px);
    }

    50% {
        transform: rotate(10deg) translateX(5px);
    }

    75% {
        transform: rotate(5deg) translateX(3px);
    }
}

/* ============================================
   ESTILOS ESPECÍFICOS: PANTALLA DE INICIO (ESTILO FINAL 3D + BOTONES PERFECTOS)
   ============================================ */

#home-screen {
    /* Fondo: Imagen 3D Generada Alta Calidad */
    background: url('assets/bg-cartoon.png') no-repeat center bottom;
    background-size: cover;
    /* Cubrir toda la pantalla */
    overflow: hidden;
    position: relative;
    font-family: 'Segoe UI Black', 'Arial Black', sans-serif;
}

/* Capa de superposición para mejorar contraste si es necesario (opcional) */
#home-screen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.1);
    /* Ligero oscurecimiento para resaltar botones */
    pointer-events: none;
    z-index: 1;
}

#home-screen .bg-decoration {
    /* Ya no es necesaria, el fondo es la imagen */
    display: none;
}

/* Contenedor transparente */
/* Contenedor transparente */
#home-screen .container {
    background: transparent;
    box-shadow: none;
    border: none;
    backdrop-filter: none;
    width: 100%;
    max-width: 900px;
    /* Ancho aumentado para título y botones largos */
    padding: 2rem;
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* LOGO - Oculto o Reemplazado por Título */
#home-screen .logo-square {
    display: none;
}

#home-screen .main-title {
    font-size: 4.5rem;
    /* Grande */
    color: #FFEB3B;
    text-transform: uppercase;
    -webkit-text-stroke: 3px #3E2723;
    text-shadow:
        0 6px 0 #3E2723,
        0 10px 20px rgba(0, 0, 0, 0.5);
    margin-bottom: 2.5rem;
    padding: 0.5rem;
    /* Padding para evitar cortes */
    line-height: 1.2;
    text-align: center;
    letter-spacing: 2px;
    transform: none;
    filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.6));
    animation: titleDynamic 4s ease-in-out infinite;
    width: 100%;
    display: flex;
    justify-content: center;
    white-space: nowrap;
    /* Evitar saltos de línea en título */
}

/* Animación Dinámica del Título */
@keyframes titleDynamic {

    0%,
    100% {
        transform: translateY(0) scale(1);
    }

    50% {
        transform: translateY(-10px) scale(1.05);
    }
}

#home-screen .tagline {
    display: none;
}

#home-screen .button-group {
    gap: 1.5rem;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* --- ESTILO DE BOTONES: Píldora Naranja/Roja Alta Fidelidad (MÁS GRANDES) --- */
#home-screen .btn {
    border-radius: 60px;
    border: 4px solid #4E342E;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    height: 90px;
    font-size: 1.8rem;
    /* Tamaño estandarizado */
    padding: 0 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    /* Clipping del brillo */
    color: #FFF;
    font-family: inherit;
    transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    background: linear-gradient(180deg, #FFCA28 0%, #FF8F00 40%, #EF6C00 100%);
    box-shadow:
        inset 0 -6px 0 rgba(255, 235, 59, 0.7),
        inset 0 4px 0 rgba(255, 255, 255, 0.5),
        0 8px 0 #3E2723,
        0 14px 14px rgba(0, 0, 0, 0.4);
    -webkit-text-stroke: 1.5px #3E2723;
    text-shadow: 3px 3px 0 #3E2723;

    /* Manejo de Ancho Uniforme */
    width: 750px;
    /* Ancho AUMENTADO a petición */
    max-width: 95%;
    /* Responsivo */
    white-space: nowrap;
}

/* Brillo superior */
#home-screen .btn::before {
    content: '';
    position: absolute;
    top: 6px;
    left: 10%;
    right: 10%;
    height: 35%;
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.1));
    border-radius: 60px 60px 20px 20px;
    filter: blur(0.5px);
    pointer-events: none;
}

/* Brillos laterales */
#home-screen .btn::after {
    top: 18%;
    right: 15px;
    width: 10px;
    height: 10px;
    background: #FFF;
    border-radius: 50%;
    box-shadow: 0 14px 0 rgba(255, 255, 255, 0.5);
    opacity: 0.9;
    position: absolute;
    content: '';
    pointer-events: none;
}

/* Animación Dinámica (Latido sutil para llamar la atención) */
@keyframes pulseBtn {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.02);
    }

    100% {
        transform: scale(1);
    }
}

#home-screen .btn-primary {
    /* height: 100px; */
    /* Mantener altura igual (90px) */
    /* font-size: 2.4rem; */
    /* ELIMINADO: Mantener tamaño estándar (1.8rem) */
    z-index: 5;
    background: linear-gradient(180deg, #FFD54F 0%, #FFA000 40%, #F57C00 100%);
    animation: pulseBtn 3s infinite ease-in-out;
    /* Movimiento dinámico */
}

#home-screen .btn:active {
    transform: translateY(8px);
    box-shadow:
        inset 0 -2px 0 rgba(255, 235, 59, 0.5),
        0 0 0 #3E2723,
        inset 0 3px 6px rgba(0, 0, 0, 0.3);
}

#home-screen .btn:hover {
    filter: brightness(1.15) contrast(1.1);
    transform: translateY(-2px);
}


/* --- BOTÓN DE CONFIGURACIÓN (ABAJO DERECHA) --- */
#home-screen .settings-link {
    position: absolute;
    bottom: 30px;
    right: 30px;
    top: auto;
    left: auto;
    width: 65px;
    height: 65px;
    background: linear-gradient(180deg, #42A5F5 0%, #1565C0 100%);
    border: 4px solid #FFF;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 6px 0 #0D47A1, 0 10px 10px rgba(0, 0, 0, 0.3);
    font-size: 0;
    color: transparent;
    text-indent: -9999px;
    overflow: hidden;
    z-index: 20;
}

#home-screen .settings-link::before {
    content: '⚙️';
    font-size: 3rem;
    /* Icono grande */
    color: #FFF;
    text-indent: 0;
    display: block;
    line-height: 1;
    filter: drop-shadow(0 2px 0 rgba(0, 0, 0, 0.2));
}

#home-screen .settings-link::after {
    content: none;
}

#home-screen .settings-link:active {
    transform: translateY(6px);
    box-shadow: 0 0 0 #0D47A1;
}


/* --- BARRA DE PROGRESO (ABAJO IZQUIERDA) --- */
#home-screen .global-progress-indicator {
    display: flex !important;
    position: absolute;
    /* Posicionamiento absoluto */
    bottom: 30px;
    left: 30px;
    /* Separado a la izquierda */
    margin: 0;
    background: #263238;
    /* Bar Background Dark */
    padding: 5px;
    border-radius: 50px;
    border: 4px solid #37474F;
    box-shadow: 0 8px 0 rgba(0, 0, 0, 0.3);
    width: 300px;
    /* Ancho fijo */
    height: 48px;
    align-items: center;
    z-index: 20;
}

/* Icono Estrella Flotante a la izquierda */
#home-screen .global-progress-indicator::before {
    content: '⭐';
    position: absolute;
    left: -20px;
    top: 50%;
    transform: translateY(-50%);
    width: 60px;
    height: 60px;
    background: linear-gradient(180deg, #FFEB3B 0%, #FBC02D 100%);
    border: 4px solid #FFF;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    z-index: 2;
}

/* Texto de progreso */
#home-screen .progress-text {
    position: absolute;
    width: 100%;
    text-align: center;
    color: #FFF;
    font-weight: 900;
    text-transform: uppercase;
    font-size: 1.2rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    z-index: 1;
    left: 10px;
    /* Ajuste por el icono */
}

/* Relleno de la barra (Simulado visualmente al 100% o usando lo que tengamos)
   Como no podemos inyectar JS para width dinámico fácilmente aquí,
   usaremos un gradiente completo como "Full Bar" visual por ahora
   o estilizar el span interno si existiera, pero el HTML es texto plano.
   Simularemos una barra llena decorativa.
*/
#home-screen .global-progress-indicator {
    background: #37474F;
    /* Base oscura */
}

/* Creamos una capa de "relleno" ficticia detrás del texto */
#home-screen .global-progress-indicator::after {
    content: '';
    position: absolute;
    top: 4px;
    left: 25px;
    bottom: 4px;
    right: 4px;
    /* Dejar hueco para icono */
    background: linear-gradient(90deg, #AB47BC 0%, #7B1FA2 100%);
    border-radius: 20px;
    width: 2%;
    /* Inicialmente casi vacía (0%) */
    box-shadow: inset 0 2px 0 rgba(255, 255, 255, 0.3);
    transition: width 1s ease-out;
}

/* ============================================
   FONDO ANIMADO CON PROFUNDIDAD (PARALLAX SIMULADO)
   ============================================ */

.bg-decoration {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    /* Detrás del contenido (z-index 10) */
    pointer-events: none;
    overflow: hidden;
}

.bg-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.4;
    filter: blur(40px);
    animation: floatShape 20s infinite alternate cubic-bezier(0.4, 0, 0.2, 1);
}

.shape-1 {
    width: 300px;
    height: 300px;
    background: #FFF176;
    top: -50px;
    left: -50px;
    animation-duration: 25s;
}

.shape-2 {
    width: 400px;
    height: 400px;
    background: #81C784;
    bottom: -100px;
    right: -100px;
    animation-duration: 30s;
    animation-delay: -5s;
}

.shape-3 {
    width: 200px;
    height: 200px;
    background: #4DD0E1;
    top: 40%;
    left: 10%;
    opacity: 0.2;
    animation-duration: 18s;
}

.shape-4 {
    width: 150px;
    height: 150px;
    background: #FFB74D;
    top: 20%;
    right: 20%;
    opacity: 0.3;
    animation-duration: 22s;
    animation-delay: -10s;
}

@keyframes floatShape {
    0% {
        transform: translate(0, 0) scale(1);
    }

    100% {
        transform: translate(30px, 40px) scale(1.1);
    }
}

/* Flotantes (Emojis/Iconos) */
.floating-item {
    position: absolute;
    font-size: 3rem;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
    animation: floatItem 8s infinite ease-in-out;
    opacity: 0.8;
}

.item-1 {
    /* Mano */
    top: 15%;
    left: 15%;
    font-size: 4rem;
    animation-duration: 12s;
    transform: rotate(-10deg);
    filter: blur(1px);
    /* Profundidad lejana */
}

.item-2 {
    /* Brillo */
    bottom: 25%;
    left: 10%;
    font-size: 2.5rem;
    animation-duration: 7s;
    animation-delay: 1s;
}

/* ============================================
   BOTÓN DE CONFIGURACIÓN (Home)
   ============================================ */
#settings-link {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 100;
    text-decoration: none;
    background: white;
    padding: 10px 20px;
    border-radius: 30px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    font-weight: bold;
    color: var(--color-primary);
    transition: transform 0.2s, box-shadow 0.2s;
}

#settings-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.item-3 {
    /* Estrella */
    top: 30%;
    right: 15%;
    font-size: 3rem;
    animation-duration: 9s;
    animation-delay: 2s;
    filter: blur(0.5px);
}

@keyframes floatItem {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-20px) rotate(10deg);
    }
}

/* ============================================
   ELEMENTOS DE FORMULARIO (Toggle Switch)
   ============================================ */
.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    /* Fallback */
    background-color: var(--text-light);
    transition: .4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked+.slider {
    background-color: #6366F1;
    /* Fallback */
    background-color: var(--color-primary);
}

input:focus+.slider {
    box-shadow: 0 0 1px var(--color-primary);
}

input:checked+.slider:before {
    transform: translateX(22px);
}